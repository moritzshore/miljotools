<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download data from the MetNordic Re-Analysis v3 dataset — get_metno_reanalysis3 • miljotools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download data from the MetNordic Re-Analysis v3 dataset — get_metno_reanalysis3"><meta property="og:description" content="The MET Nordic rerun archive version 3 can be accessed using this
function. Please see below for more details."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">miljotools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/metno_reanal.html">MET Nordic Reanalysis Dataset</a>
    </li>
    <li>
      <a href="../articles/Norwegian_Soil_Classification.html">Soil Classification</a>
    </li>
    <li>
      <a href="../articles/thermopluviograms.html">Thermopluviograms</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/moritzshore/miljotools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download data from the MetNordic Re-Analysis v3 dataset</h1>
    <small class="dont-index">Source: <a href="https://github.com/moritzshore/miljotools/blob/HEAD/R/metnorenal3.R" class="external-link"><code>R/metnorenal3.R</code></a></small>
    <div class="hidden name"><code>get_metno_reanalysis3.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The MET Nordic rerun archive version 3 can be accessed using this
function. Please see below for more details.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_metno_reanalysis3</span><span class="op">(</span></span>
<span>  <span class="va">area</span>,</span>
<span>  directory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fromdate <span class="op">=</span> <span class="st">"2012-09-01 10:00:00"</span>,</span>
<span>  todate <span class="op">=</span> <span class="st">"2012-09-01 20:00:00"</span>,</span>
<span>  mn_variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  area_buffer <span class="op">=</span> <span class="fl">1500</span>,</span>
<span>  grid_resolution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preview <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ncdf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  continue <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-area">area<a class="anchor" aria-label="anchor" href="#arg-area"></a></dt>
<dd><p>(string) path to geo-referenced shapefile (polygon or point) of the desired area</p></dd>


<dt id="arg-directory">directory<a class="anchor" aria-label="anchor" href="#arg-directory"></a></dt>
<dd><p>(string) path to desired working directory (default: working directory)</p></dd>


<dt id="arg-fromdate">fromdate<a class="anchor" aria-label="anchor" href="#arg-fromdate"></a></dt>
<dd><p>(string) date and time for start of time series (ie. "2012-09-01 10:00:00")</p></dd>


<dt id="arg-todate">todate<a class="anchor" aria-label="anchor" href="#arg-todate"></a></dt>
<dd><p>(string) date and time for end of time series (ie. "2013-09-01 10:00:00")</p></dd>


<dt id="arg-mn-variables">mn_variables<a class="anchor" aria-label="anchor" href="#arg-mn-variables"></a></dt>
<dd><p>(vector) Leave blank for deafault (tested) variables. See details for more</p></dd>


<dt id="arg-area-buffer">area_buffer<a class="anchor" aria-label="anchor" href="#arg-area-buffer"></a></dt>
<dd><p>desired buffer around the provided shapefile (in meters, default 1500)</p></dd>


<dt id="arg-grid-resolution">grid_resolution<a class="anchor" aria-label="anchor" href="#arg-grid-resolution"></a></dt>
<dd><p>(integer) desired resolution of downloaded grid in kilometers. (see help page for more details)</p></dd>


<dt id="arg-preview">preview<a class="anchor" aria-label="anchor" href="#arg-preview"></a></dt>
<dd><p>generate graphs showing previews of data download? (boolean)</p></dd>


<dt id="arg-ncdf">ncdf<a class="anchor" aria-label="anchor" href="#arg-ncdf"></a></dt>
<dd><p>Set this parameter to be <code>TRUE</code> if you would like the downloaded files to remain in NCDF format (*.nc).</p></dd>


<dt id="arg-continue">continue<a class="anchor" aria-label="anchor" href="#arg-continue"></a></dt>
<dd><p>if <code>ncdf</code> is <code>TRUE</code>, then you can pass a folder name (in passed directory) here to continue an aborted download session.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Function returns a path to where .csv files of the download were
written. One .csv file for each grid point within the (buffered) shape
file area. Additionally one metadata file (.csv) is written with the
attributes of each other file</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For instructions on how to use this function, you can visit the article on
the <a href="https://moritzshore.github.io/miljotools/articles/metno_reanal.html" class="external-link">web page</a>.</p>
<p>The <a href="https://github.com/metno/NWPdocs/wiki/MET-Nordic-dataset" class="external-link">MET Nordic Reanalysis Dataset</a>
is a reanalysis product from the Meteorologisk institutt (hourly from 2012-09 to
2023-01). Please inform yourself on the limitations of reanalysis data before
applying this dataset to your needs.This function accesses the THREDDS server
of met.no with download queries formatted from user input:</p>
<p><code>area</code> should be a path to a <strong>geo-referenced</strong> shapefile (of either a
<strong>polygon</strong> or a <strong>point</strong> geometry) of the area you would like data from.
This area must be at least twice the size of the chosen <code>grid_resolution</code>,
which is by default 1 x 1 km. If a point shapefile is given, then the nearest
grid cell is chosen, and data is downloaded from there.</p>
<p><code>directory</code> is an optional parameter which lets you chose in which directory
the downloads will be stored. If this parameter is not defined, the current
working directory will be used.</p>
<p><code>fromdate</code> and <code>todate</code> are the date and time by which to bound the download
by. required format is: <strong>"2012-09-01 10:00:00"</strong>. The dataset spans from this
date til 2023-01.</p>
<p><code>mn_variables</code> are the MetNordic Variables which the function should
download, by default this includes the following:</p><ul><li><p>"air_temperature_2m",</p></li>
<li><p>"integral_of_surface_downwelling_shortwave_flux_in_air_wrt_time",</p></li>
<li><p>"relative_humidity_2m",</p></li>
<li><p>"precipitation_amount",</p></li>
<li><p>"wind_speed_10m",</p></li>
<li><p>"wind_direction_10m"</p></li>
</ul><p>There are a few more variables which are not downloaded, these have not been
tested, and some are known to have data gaps which the function currently
cannot deal with, and might cause it to fail. use at own risk, and post an
issue if anything does not work.</p>
<p>You can read more about these variables on <a href="https://github.com/metno/NWPdocs/wiki/MET-Nordic-dataset" class="external-link">GitHub (MetNo)</a></p>
<p><code>area_buffer</code> is an optional convienient parameter in which you can  buffer
your polygon shape file by the given amount of meters. This is useful for
downloading stations that are outside of the bounds of your polygon, but are
still relatively close to the border (due to the 1x1km grid). A good (and
default) value for this is 1500 m</p>
<p><code>grid_resolution</code> lets you choose how many stations to select from the grid.
If for example you pass a "3", then every 3 station will be selected in both
the horizontal and vertical axis, giving you a grid with stations placed 3km
apart from each other on a regular grid. This can help with downloading data
from huge catchments where 1x1km grid size is not necessary. Please note, no
averaging of the "non-selected" grid cells is performed, and the default
value is 1 x 1 km.</p>
<p><code>preview</code> prints information to the console as to what the function is doing,
as well as plotting interactive maps to the viewer which gives you an idea of
which grid cells were selected relative to the shapefile you provided.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Moritz Shore</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="kw">if</span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="fu">get_metno_reanalysis3</span><span class="op">(</span></span></span>
<span class="r-in"><span> area <span class="op">=</span> <span class="va">example_file_path</span>,</span></span>
<span class="r-in"><span> fromdate <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span></span>
<span class="r-in"><span> todate <span class="op">=</span> <span class="st">"2015-01-02"</span>,</span></span>
<span class="r-in"><span> area_buffer <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span> preview <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Moritz Shore.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

