<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download data from the MetNordic Re-Analysis v3 dataset — get_metno_reanalysis3 • miljotools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download data from the MetNordic Re-Analysis v3 dataset — get_metno_reanalysis3"><meta name="description" content="The MET Nordic rerun archive version 3 can be accessed using this
function. Please see below for more details."><meta property="og:description" content="The MET Nordic rerun archive version 3 can be accessed using this
function. Please see below for more details."><meta property="og:image" content="https://moritzshore.github.io/miljotools/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">miljotools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/metno_reanal.html">MET Nordic Reanalysis Dataset</a></li>
    <li><a class="dropdown-item" href="../articles/Norwegian_Soil_Classification.html">Soil Classification</a></li>
    <li><a class="dropdown-item" href="../articles/thermopluviograms.html">Thermopluviograms</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/moritzshore/miljotools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Download data from the MetNordic Re-Analysis v3 dataset</h1>
      <small class="dont-index">Source: <a href="https://github.com/moritzshore/miljotools/blob/HEAD/R/metnorenal3.R" class="external-link"><code>R/metnorenal3.R</code></a></small>
      <div class="d-none name"><code>get_metno_reanalysis3.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The MET Nordic rerun archive version 3 can be accessed using this
function. Please see below for more details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_metno_reanalysis3</span><span class="op">(</span></span>
<span>  <span class="va">area</span>,</span>
<span>  directory <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fromdate <span class="op">=</span> <span class="st">"2012-09-01 10:00:00"</span>,</span>
<span>  todate <span class="op">=</span> <span class="st">"2012-09-01 20:00:00"</span>,</span>
<span>  mn_variables <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  area_buffer <span class="op">=</span> <span class="fl">1500</span>,</span>
<span>  grid_resolution <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preview <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-area">area<a class="anchor" aria-label="anchor" href="#arg-area"></a></dt>
<dd><p>(string) path to geo-referenced shapefile (polygon or point) of the desired area</p></dd>


<dt id="arg-directory">directory<a class="anchor" aria-label="anchor" href="#arg-directory"></a></dt>
<dd><p>(string) path to desired working directory (default: working directory)</p></dd>


<dt id="arg-fromdate">fromdate<a class="anchor" aria-label="anchor" href="#arg-fromdate"></a></dt>
<dd><p>(string) date and time for start of time series (ie. "2012-09-01 10:00:00")</p></dd>


<dt id="arg-todate">todate<a class="anchor" aria-label="anchor" href="#arg-todate"></a></dt>
<dd><p>(string) date and time for end of time series (ie. "2013-09-01 10:00:00")</p></dd>


<dt id="arg-mn-variables">mn_variables<a class="anchor" aria-label="anchor" href="#arg-mn-variables"></a></dt>
<dd><p>(vector) Leave blank for deafault (tested) variables. See details for more</p></dd>


<dt id="arg-area-buffer">area_buffer<a class="anchor" aria-label="anchor" href="#arg-area-buffer"></a></dt>
<dd><p>desired buffer around the provided shapefile (in meters, default 1500)</p></dd>


<dt id="arg-grid-resolution">grid_resolution<a class="anchor" aria-label="anchor" href="#arg-grid-resolution"></a></dt>
<dd><p>(integer) desired resolution of downloaded grid in kilometers. (see help page for more details)</p></dd>


<dt id="arg-preview">preview<a class="anchor" aria-label="anchor" href="#arg-preview"></a></dt>
<dd><p>generate graphs showing previews of data download? (boolean)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Function returns a path to where .csv files of the download were
written. One .csv file for each grid point within the (buffered) shape
file area. Additionally one metadata file (.csv) is written with the
attributes of each other file</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For instructions on how to use this function, you can visit the article on
the <a href="https://moritzshore.github.io/miljotools/articles/metno_reanal.html">web page</a>.</p>
<p>The <a href="https://github.com/metno/NWPdocs/wiki/MET-Nordic-dataset" class="external-link">MET Nordic Reanalysis Dataset</a>
is a reanalysis product from the Meteorologisk institutt (hourly from 2012-09 to
2023-01). Please inform yourself on the limitations of reanalysis data before
applying this dataset to your needs.This function accesses the THREDDS server
of met.no with download queries formatted from user input:</p>
<p><code>area</code> should be a path to a <strong>geo-referenced</strong> shapefile (of either a
<strong>polygon</strong> or a <strong>point</strong> geometry) of the area you would like data from.
This area must be at least twice the size of the chosen <code>grid_resolution</code>,
which is by default 1 x 1 km. If a point shapefile is given, then the nearest
grid cell is chosen, and data is downloaded from there.</p>
<p><code>directory</code> is an optional parameter which lets you chose in which directory
the downloads will be stored. If this parameter is not defined, the current
working directory will be used.</p>
<p><code>fromdate</code> and <code>todate</code> are the date and time by which to bound the download
by. required format is: <strong>"2012-09-01 10:00:00"</strong>. The dataset spans from this
date til 2023-01.</p>
<p><code>mn_variables</code> are the MetNordic Variables which the function should
download, by default this includes the following:</p><ul><li><p>"air_temperature_2m",</p></li>
<li><p>"integral_of_surface_downwelling_shortwave_flux_in_air_wrt_time",</p></li>
<li><p>"relative_humidity_2m",</p></li>
<li><p>"precipitation_amount",</p></li>
<li><p>"wind_speed_10m",</p></li>
<li><p>"wind_direction_10m"</p></li>
</ul><p>There are a few more variables which are not downloaded, these have not been
tested, and some are known to have data gaps which the function currently
cannot deal with, and might cause it to fail. use at own risk, and post an
issue if anything does not work.</p>
<p>You can read more about these variables on <a href="https://github.com/metno/NWPdocs/wiki/MET-Nordic-dataset" class="external-link">GitHub (MetNo)</a></p>
<p><code>area_buffer</code> is an optional convienient parameter in which you can  buffer
your polygon shape file by the given amount of meters. This is useful for
downloading stations that are outside of the bounds of your polygon, but are
still relatively close to the border (due to the 1x1km grid). A good (and
default) value for this is 1500 m</p>
<p><code>grid_resolution</code> lets you choose how many stations to select from the grid.
If for example you pass a "3", then every 3 station will be selected in both
the horizontal and vertical axis, giving you a grid with stations placed 3km
apart from each other on a regular grid. This can help with downloading data
from huge catchments where 1x1km grid size is not necessary. Please note, no
averaging of the "non-selected" grid cells is performed, and the default
value is 1 x 1 km.</p>
<p><code>preview</code> prints information to the console as to what the function is doing,
as well as plotting interactive maps to the viewer which gives you an idea of
which grid cells were selected relative to the shapefile you provided.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Moritz Shore</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="kw">if</span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="fu">get_metno_reanalysis3</span><span class="op">(</span></span></span>
<span class="r-in"><span> area <span class="op">=</span> <span class="va">example_file_path</span>,</span></span>
<span class="r-in"><span> fromdate <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span></span>
<span class="r-in"><span> todate <span class="op">=</span> <span class="st">"2015-01-02"</span>,</span></span>
<span class="r-in"><span> area_buffer <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span> preview <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span> <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Moritz Shore.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

